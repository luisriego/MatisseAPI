{# templates/admin/income/list.html.twig #}
{% extends 'admin/layout.html.twig' %}

{% block title %}{{ 'income.list.title'|trans }}{% endblock %}

{# Configure admin layout header elements #}
{% block page_title %}{{ 'income.list.title'|trans }}{% endblock %}

{% block breadcrumb %}
    <li class="breadcrumb-item active" aria-current="page">{{ 'income.list.title'|trans }}</li>
{% endblock %}

{% block page_actions %}
    <a href="{{ path('admin_income_create') }}" class="btn btn-primary">
        <twig:ux:icon name="tabler:plus" class="me-1"/> {{ 'income.create_action'|trans }}
    </a>
{% endblock %}

{# --- Layout Customizations for this page --- #}
{% block main_column_class %}col-12{% endblock %} {# Make main content full width #}
{% block sidebar %}{% endblock %} {# Empty the sidebar block, so it won't be rendered #}
{# --- End Layout Customizations --- #}

{% block admin_page_content %}
    {# Flash messages are already included in admin/layout.html.twig #}

    {# If you have filters for income, add them here similar to expense list #}
    {# <div class="card card-body mb-4"> ... filter form ... </div> #}

    {% if incomes is defined and incomes %}
        <div class="card">
            <div class="card-header">
                <h3 class="card-title mb-0">{{ 'income.list.all'|trans }}</h3>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-hover mb-0">
                    <thead>
                    <tr>
                        <th>{{ 'income.field.description'|trans }}</th>
                        <th>{{ 'income.field.amount'|trans }}</th>
                        <th>{{ 'income.field.date'|trans }}</th>
                        <th>{{ 'income.field.residence_unit'|trans }}</th> {# Changed from Account to Residence Unit as per your template #}
                        <th>{{ 'actions'|trans }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for income in incomes %}
                        <tr>
                            <td>{{ income.type.name|default('') }} - {{ income.description }}</td>
                            <td>{{ (income.amount / 100) | number_format(2, ',', '.') }} R$</td>
                            <td>{{ income.dueDate | date('d/m/Y') }}</td>
                            <td>{{ income.residence.unit|default('N/A') }}</td>
                            <td>
                                {# Assuming an edit path for income, adjust if different #}
                                <a href="{{ path('admin_income_edit', { id: income.id }) }}"
                                   class="btn btn-sm btn-outline-primary">
                                    <twig:ux:icon name="tabler:edit" class="me-1"/>{{ 'action.edit'|trans }}
                                </a>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="5" class="text-center">{{ 'income.list.no_incomes_found'|trans }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    {% else %}
        <div class="alert alert-info">
            <p>{{ 'income.list.data_from_bank_api'|trans }}</p>
            {# Or a more generic "No incomes found." message if the API message is conditional #}
            {# {{ 'income.list.no_incomes_found'|trans }} #}
        </div>
    {% endif %}
{% endblock %}
